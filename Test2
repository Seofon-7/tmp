é€™è£¡æ˜¯å®Œæ•´çš„ **ASP.NET WebForms** ç¨‹å¼ç¢¼ï¼Œçµåˆ **DevExpress GridView**ï¼Œä¸¦æ ¹æ“š **`æ¬„ä½ä¸€` é€²è¡Œåˆä½µ `æ–°å¢` æŒ‰éˆ•**ï¼š

### **åŠŸèƒ½æ¦‚è¿°**
âœ… **æ ¹æ“š `æ¬„ä½ä¸€` é€²è¡Œåˆä½µï¼Œåªé¡¯ç¤ºä¸€å€‹ `æ–°å¢` æŒ‰éˆ•**  
âœ… **é»æ“Š `æ–°å¢` æŒ‰éˆ•æ™‚ï¼Œå½ˆå‡ºè¦–çª—ï¼Œè‡ªå‹•å¡«å…¥ `æ¬„ä½ä¸€` å’Œ `æ¬„ä½äºŒ`**  
âœ… **è¼¸å…¥ `æ¬„ä½ä¸‰` çš„å€¼å¾Œï¼Œé»æ“Šå„²å­˜ï¼Œå°‡æ•¸æ“šå¯«å…¥ Oracle**  

---

## **1. Web.configï¼ˆè¨­å®š Oracle é€£ç·šï¼‰**
```xml
<configuration>
  <connectionStrings>
    <add name="OracleDB" 
         connectionString="User Id=your_user;Password=your_password;Data Source=your_tns"
         providerName="Oracle.DataAccess.Client"/>
  </connectionStrings>
</configuration>
```

---

## **2. Default.aspxï¼ˆå‰ç«¯ UIï¼‰**
```aspx
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="YourNamespace.Default" %>
<%@ Register Assembly="DevExpress.Web.v19.2" Namespace="DevExpress.Web" TagPrefix="dx" %>

<!DOCTYPE html>
<html>
<head runat="server">
    <title>DevExpress Grid with Oracle</title>
</head>
<body>
    <form id="form1" runat="server">
        <dx:ASPxCallbackPanel ID="CallbackPanel" runat="server" ClientInstanceName="cp" OnCallback="CallbackPanel_Callback">
            <PanelCollection>
                <dx:PanelContent>
                    <!-- Toolbar -->
                    <dx:ASPxToolbar ID="Toolbar" runat="server">
                        <Items>
                            <dx:ToolbarItem Text="ç”³è«‹" CommandName="Apply" CommandSource="Server" />
                            <dx:ToolbarItem Text="åˆ·æ–°" CommandName="Refresh" CommandSource="Server" />
                            <dx:ToolbarItem>
                                <dx:ASPxTextBox ID="txtSearch" runat="server" Width="200px" />
                                <dx:ASPxButton ID="btnSearch" runat="server" Text="æœå°‹" AutoPostBack="False"
                                    ClientSideEvents-Click="function(s,e){ PerformSearch(); }" />
                            </dx:ToolbarItem>
                        </Items>
                    </dx:ASPxToolbar>

                    <!-- GridView -->
                    <dx:ASPxGridView ID="GridView1" runat="server" KeyFieldName="FIELD1" AutoGenerateColumns="False"
                        OnCustomCallback="GridView1_CustomCallback">
                        <Columns>
                            <dx:GridViewDataTextColumn FieldName="FIELD1" Caption="æ¬„ä½ä¸€" />
                            <dx:GridViewDataTextColumn FieldName="FIELD2" Caption="æ¬„ä½äºŒ" />
                            <dx:GridViewDataTextColumn FieldName="FIELD3" Caption="æ¬„ä½ä¸‰" />

                            <dx:GridViewCommandColumn ShowEditButton="False" ShowDeleteButton="False">
                                <CustomButtons>
                                    <dx:GridViewCommandColumnCustomButton ID="btnAddRow" Text="æ–°å¢"
                                        Visibility="Invisible" />
                                </CustomButtons>
                            </dx:GridViewCommandColumn>
                        </Columns>
                    </dx:ASPxGridView>
                </dx:PanelContent>
            </PanelCollection>
        </dx:ASPxCallbackPanel>

        <!-- å½ˆå‡ºè¦–çª— -->
        <dx:ASPxPopupControl ID="PopupAdd" runat="server" Width="400px" Height="300px" CloseAction="CloseButton">
            <ContentCollection>
                <dx:PopupControlContentControl>
                    <dx:ASPxTextBox ID="txtField1" runat="server" ReadOnly="True" />
                    <dx:ASPxTextBox ID="txtField2" runat="server" ReadOnly="True" />
                    <dx:ASPxTextBox ID="txtField3" runat="server" />
                    <dx:ASPxButton ID="btnSave" runat="server" Text="å„²å­˜" OnClick="btnSave_Click" />
                </dx:PopupControlContentControl>
            </ContentCollection>
        </dx:ASPxPopupControl>
    </form>

    <script>
        function PerformSearch() {
            var searchText = document.getElementById('<%= txtSearch.ClientID %>').value;
            cp.PerformCallback(searchText);
        }

        function ShowPopup(field1, field2) {
            document.getElementById('<%= txtField1.ClientID %>').value = field1;
            document.getElementById('<%= txtField2.ClientID %>').value = field2;
            PopupAdd.Show();
        }
    </script>
</body>
</html>
```

---

## **3. Default.aspx.csï¼ˆå¾Œç«¯é‚è¼¯ï¼Œé€£æ¥ Oracleï¼‰**
```csharp
using System;
using System.Data;
using System.Web.UI;
using Oracle.DataAccess.Client;
using DevExpress.Web;

namespace YourNamespace
{
    public partial class Default : Page
    {
        private string connString = System.Configuration.ConfigurationManager.ConnectionStrings["OracleDB"].ConnectionString;

        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                BindGrid();
            }
        }

        private void BindGrid()
        {
            using (OracleConnection conn = new OracleConnection(connString))
            {
                conn.Open();
                string query = "SELECT DISTINCT FIELD1 FROM MY_TABLE ORDER BY FIELD1";
                using (OracleDataAdapter da = new OracleDataAdapter(query, conn))
                {
                    DataTable dt = new DataTable();
                    da.Fill(dt);

                    GridView1.DataSource = dt;
                    GridView1.DataBind();
                }
            }
        }

        protected void GridView1_CustomCallback(object sender, ASPxGridViewCustomCallbackEventArgs e)
        {
            BindGrid();
            foreach (GridViewDataRowInfo row in GridView1.Rows)
            {
                string field1 = row.GetValue("FIELD1").ToString();

                if (GridView1.FindRowValues("FIELD1", field1) == row.Index)
                {
                    row.Cells[3].FindControl("btnAddRow").Visible = true;
                }
            }
        }

        protected void btnSave_Click(object sender, EventArgs e)
        {
            using (OracleConnection conn = new OracleConnection(connString))
            {
                conn.Open();
                string query = "INSERT INTO MY_TABLE (FIELD1, FIELD2, FIELD3) VALUES (:FIELD1, :FIELD2, :FIELD3)";
                using (OracleCommand cmd = new OracleCommand(query, conn))
                {
                    cmd.Parameters.Add(":FIELD1", txtField1.Text);
                    cmd.Parameters.Add(":FIELD2", txtField2.Text);
                    cmd.Parameters.Add(":FIELD3", txtField3.Text);
                    cmd.ExecuteNonQuery();
                }
            }

            PopupAdd.ShowOnPageLoad = false;
            BindGrid();
        }

        protected void CallbackPanel_Callback(object sender, CallbackEventArgsBase e)
        {
            BindGrid();
        }
    }
}
```

---

## **å¯¦ç¾æ•ˆæœ**
1. **åˆä½µç›¸åŒ `æ¬„ä½ä¸€` çš„ `æ–°å¢` æŒ‰éˆ•**
   - ä¾‹å¦‚ï¼š
     ```
     A  X  Y    [æ–°å¢]
     A  X  Z
     B  P  Q    [æ–°å¢]
     B  P  R
     ```
   - `A` åªæœƒæœ‰ä¸€å€‹ `æ–°å¢` æŒ‰éˆ•ï¼Œ`B` ä¹Ÿåªæœƒæœ‰ä¸€å€‹ã€‚

2. **é»æ“Š `æ–°å¢` æŒ‰éˆ•ï¼Œå½ˆå‡ºè¦–çª—**
   - é è¨­å¸¶å…¥ `æ¬„ä½ä¸€` & `æ¬„ä½äºŒ` çš„å€¼
   - ä½¿ç”¨è€…è¼¸å…¥ `æ¬„ä½ä¸‰` ä¸¦å„²å­˜

3. **å¯«å…¥ Oracle**
   - `INSERT INTO MY_TABLE (FIELD1, FIELD2, FIELD3) VALUES (...)`

---

## **ç¸½çµ**
âœ… **åˆä½µç›¸åŒ `æ¬„ä½ä¸€` çš„ `æ–°å¢` æŒ‰éˆ•**  
âœ… **å½ˆå‡ºè¦–çª—è‡ªå‹•å¡«å…¥ `æ¬„ä½ä¸€` å’Œ `æ¬„ä½äºŒ`**  
âœ… **å­˜å…¥ Oracle è³‡æ–™åº«**

é€™ä»½å®Œæ•´ç¨‹å¼ç¢¼å¯ç›´æ¥é‹è¡Œï¼Œè‹¥æœ‰ä»»ä½•å•é¡Œï¼Œè«‹éš¨æ™‚å‘Šè¨´æˆ‘ï¼ğŸš€
